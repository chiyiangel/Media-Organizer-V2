# å¤šè¯­è¨€æ”¯æŒ (Internationalization)

æœ¬é¡¹ç›®æ”¯æŒå¤šè¯­è¨€ç•Œé¢ï¼Œå¯æ ¹æ®æ“ä½œç³»ç»Ÿè¯­è¨€è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„è¯­è¨€ã€‚

## æ”¯æŒçš„è¯­è¨€

- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡** (zh) - ç®€ä½“ä¸­æ–‡ç•Œé¢
- ğŸ‡ºğŸ‡¸ **English** (en) - English interface

## è¯­è¨€æ£€æµ‹æœºåˆ¶

ç¨‹åºå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿè¯­è¨€ï¼š

### Unix/Linux/macOS ç³»ç»Ÿ
æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ£€æµ‹ç¯å¢ƒå˜é‡ï¼š
1. `LANG` ç¯å¢ƒå˜é‡
2. `LC_ALL` ç¯å¢ƒå˜é‡  
3. `LC_MESSAGES` ç¯å¢ƒå˜é‡
4. `LANGUAGE` ç¯å¢ƒå˜é‡

### Windows ç³»ç»Ÿ
æ£€æµ‹ `LANGUAGE` ç¯å¢ƒå˜é‡

### è¯­è¨€æ˜ å°„è§„åˆ™
- `zh*` (zh, zh_CN, zh_TW ç­‰) â†’ ä¸­æ–‡ç•Œé¢
- `en*` (en, en_US, en_GB ç­‰) â†’ è‹±æ–‡ç•Œé¢
- å…¶ä»–ä¸æ”¯æŒçš„è¯­è¨€ â†’ é»˜è®¤è‹±æ–‡ç•Œé¢

## æ‰‹åŠ¨è®¾ç½®è¯­è¨€

å¦‚æœéœ€è¦å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šè¯­è¨€ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

### è®¾ç½®ä¸ºä¸­æ–‡
```bash
# Linux/macOS
export LANG=zh_CN.UTF-8

# Windows (PowerShell)
$env:LANG = "zh_CN.UTF-8"

# Windows (Command Prompt)
set LANG=zh_CN.UTF-8
```

### è®¾ç½®ä¸ºè‹±æ–‡
```bash
# Linux/macOS
export LANG=en_US.UTF-8

# Windows (PowerShell)
$env:LANG = "en_US.UTF-8"

# Windows (Command Prompt)  
set LANG=en_US.UTF-8
```

## æŠ€æœ¯å®ç°

### æ¶æ„æ¦‚è§ˆ
```
internal/i18n/
â”œâ”€â”€ localizer.go     # è¯­è¨€æ£€æµ‹å’Œç¿»è¯‘æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ messages.go      # æ‰€æœ‰è¯­è¨€çš„æ–‡æœ¬èµ„æº
â””â”€â”€ localizer_test.go # å•å…ƒæµ‹è¯•
```

### æ ¸å¿ƒAPI

```go
// è·å–å…¨å±€æœ¬åœ°åŒ–å®ä¾‹
localizer := i18n.GetLocalizer()

// ç®€å•ç¿»è¯‘
text := i18n.T("app.title")

// å¸¦å‚æ•°çš„ç¿»è¯‘
text := i18n.Tf("error.extract_date", errorMsg)

// è®¾ç½®è¯­è¨€
i18n.SetLanguage(i18n.LanguageChinese)

// è·å–å½“å‰è¯­è¨€
current := i18n.GetLanguage()
```

### æ·»åŠ æ–°è¯­è¨€

1. åœ¨ `internal/i18n/localizer.go` ä¸­æ·»åŠ è¯­è¨€å¸¸é‡ï¼š
```go
const (
    LanguageChinese Language = "zh"
    LanguageEnglish Language = "en"
    LanguageJapanese Language = "ja" // æ–°å¢æ—¥è¯­
)
```

2. åœ¨ `internal/i18n/messages.go` ä¸­æ·»åŠ ç¿»è¯‘èµ„æºï¼š
```go
l.messages = map[Language]map[string]string{
    // ... ç°æœ‰è¯­è¨€
    LanguageJapanese: {
        "app.title": "ğŸ“¸ å†™çœŸãƒ»å‹•ç”»æ•´ç†ãƒ„ãƒ¼ãƒ« v1.0",
        // ... å…¶ä»–ç¿»è¯‘
    },
}
```

3. åœ¨ `parseLanguageCode()` æ–¹æ³•ä¸­æ·»åŠ æ£€æµ‹é€»è¾‘ï¼š
```go
switch {
case strings.HasPrefix(mainLang, "ja"): // æ—¥è¯­
    return string(LanguageJapanese)
}
```

## æµ‹è¯•å¤šè¯­è¨€åŠŸèƒ½

è¿è¡Œå•å…ƒæµ‹è¯•ï¼š
```bash
go test ./internal/i18n/
```

æ‰‹åŠ¨æµ‹è¯•ä¸åŒè¯­è¨€ï¼š
```bash
# æµ‹è¯•ä¸­æ–‡
LANG=zh_CN.UTF-8 ./build/media-organizer

# æµ‹è¯•è‹±æ–‡  
LANG=en_US.UTF-8 ./build/media-organizer
```

## ä½¿ç”¨ç¤ºä¾‹

### ç•Œé¢æ–‡æœ¬å¯¹æ¯”

#### ä¸­æ–‡ç•Œé¢
```
ğŸ“¸ ç…§ç‰‡è§†é¢‘æ•´ç†å·¥å…· v1.0

ğŸ“ æºç›®å½•: æœªè®¾ç½®
           æŒ‰ [S] ç¼–è¾‘è·¯å¾„

ğŸ“‚ ç›®æ ‡ç›®å½•: æœªè®¾ç½®  
           æŒ‰ [D] ç¼–è¾‘è·¯å¾„

âš™ï¸ æ•´ç†ç­–ç•¥:
    åŒæ–‡ä»¶è¯†åˆ«: [F] æ–‡ä»¶å â—  [M] MD5å“ˆå¸Œ  
    é‡å¤å¤„ç†:   [1] è·³è¿‡ â—  [2] è¦†ç›–   [3] é‡å‘½å  

æŒ‰ [Enter] å¼€å§‹æ•´ç†  |  æŒ‰ [Q/Esc] é€€å‡ºç¨‹åº
```

#### English Interface
```
ğŸ“¸ Photo Video Organizer v1.0

ğŸ“ Source Directory: Not Set
           Press [S] to edit path

ğŸ“‚ Target Directory: Not Set
           Press [D] to edit path

âš™ï¸ Organization Strategy:
    File Detection: [F] Filename â—  [M] MD5 Hash  
    Duplicate Action: [1] Skip â—  [2] Overwrite   [3] Rename  

Press [Enter] to start  |  Press [Q/Esc] to quit
```

## æ•…éšœæ’é™¤

### è¯­è¨€æ²¡æœ‰æ­£ç¡®æ£€æµ‹
1. æ£€æŸ¥ç¯å¢ƒå˜é‡è®¾ç½®ï¼š
```bash
echo $LANG
echo $LC_ALL
```

2. æ£€æŸ¥ç¨‹åºå¯åŠ¨æ—¶çš„è¯­è¨€æ£€æµ‹æ—¥å¿—

### æŸäº›æ–‡æœ¬ä»æ˜¾ç¤ºä¸ºè‹±æ–‡
1. ç¡®è®¤è¯¥æ–‡æœ¬é”®æ˜¯å¦å·²æ·»åŠ åˆ°å¯¹åº”è¯­è¨€çš„ç¿»è¯‘èµ„æºä¸­
2. æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† `i18n.T()` æˆ– `i18n.Tf()` å‡½æ•°

### æ·»åŠ æ–°ç¿»è¯‘
å‚è€ƒç°æœ‰çš„ç¿»è¯‘é”®åè§„èŒƒï¼Œåœ¨ `messages.go` ä¸­æ·»åŠ å¯¹åº”è¯­è¨€çš„ç¿»è¯‘æ¡ç›®ã€‚